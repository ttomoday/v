<!DOCTYPE html>
<html>

<head>
    <title>Calculator</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic&subset=latin,cyrillic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <!--[if lt IE 9]>
			<script src="js/html5shiv.min.js"></script>
			<script src="js/rem.min"></script>
		<![endif]-->

	<style type="text/css">
		.color_l_sidebar {
			width: 18%;
			margin: 3% 1%;
			float: left
		}

		.color_l_sidebar h1 {
			font-size: 20px;
			color: #303841;
			border-bottom: 1px solid;
			text-align: center;
			text-transform: uppercase;
			margin-bottom: 34px;
			padding-bottom: 15px
		}
		@media screen and (max-width:1115px) {
	.color_l_sidebar {
		width: 98%;
		float: none
	}
	.color_l_sidebar h1 {
		width: 90%;
		margin: 0 auto
	}
	.color_menu {
		width: 590px;
		margin: 22px auto 18px
	}
	.color_menu li {
		display: inline-block
	}
	.color_menu li a {
		margin: 0 5px
	}
	.color_menu li::after {
		content: "/"
	}
	.color_menu li:last-child::after {
		content: ""
	}
	.select_color {
		width: 497px
	}
	.select_color span {
		width: 33px;
		height: 33px
	}
	.home_pic {
		float: none;
		position: relative;
		margin: 0 auto;
		width: 878px
	}
}

@media screen and (max-width:940px) {
	.color_page {
		min-width: 740px
	}
	.color_l_sidebar h1 {
		width: 100%
	}
	.home_pic {
		width: 700px;
		height: 437px
	}
}

.home_pic {
	float: right;
	position: relative
}

.select_color {
	width: 93%;
	margin: 22px auto
}

.select_color_white {
	border: 1px solid #e2e2e2
}

.select_color span {
	width: 38px;
	height: 38px;
	margin: 0 -9px 10px 11px
}

.select_color .active {
	border: 4px solid #1eaaf1
}

.select_color .active {
	border: 4px solid #1eaaf1
}

.color_page {
	max-width: 1132px;
    width: 95%;
    margin: 0 auto;
	}
	.select_color span, .view_ctrl a {
	display: inline-block
}
.select_color span {
	width: 38px;
	height: 38px;
	margin: 0 -9px 10px 11px
}
.select_color .active {
	border: 4px solid #1eaaf1
}

.view_ctrl {
	display: inline-block;
	position: absolute;
	width: 120px;
	top: 15px;
	right: 15px
}
	</style>
</head>

<body>
    <header class="main_header">
        <div class="logo">
            <a href="index.html"><img src="content/logo.png" alt="RainWay" /></a>
        </div>
        <div class="search">
            <form action="" method="Post" name="headerSearchForm" class="header_search_form">
                <a class="close_btn"></a>
                <button type="submit" name="submit_button" class="icon-search"></button>
                <input type="text" name="search_field" placeholder="Я хочу найти..." />
            </form>
            <a class="header_search_btn icon-search"></a>
        </div>
        <div class="language_selector">
            <a><span class="selected">укр</span></a>
            <ul>
                <li><a href="">укр</a>
                    <li><a href="">укр</a>
                        <li><a href="">укр</a>
            </ul>
        </div>
        <a class="main_nav_toggle hamurger"><span></span></a>
        <nav class="main_nav row">
            <ul>
                <li><a href="about.html">О компании</a>
                    <li><a href="products.html">Продукция</a>
                        <ul>
                            <li><a href="products.html">Водостоки</a>
                                <li><a href="pricelist.html">Прайс-лист</a>
                                    <li><a href="catalogue.html">Каталог</a>
                                        <li><a href="about.html">Преимущества</a>
                                            <li><a href="gallery.html">Фотогаллерея</a>
                                                <li><a href="pricelist.html">Прайс-лист</a>
                        </ul>
                        <li><a href="calculator.html">Подобрать водосток</a>
                            <li><a href="installing.html">Монтаж</a>
                                <li><a href="faq.html">Полезное</a>
                                    <li><a href="sellers.html">Где купить</a>
                                        <li><a href="contacts.html">Контакты</a>
            </ul>
        </nav>
    </header>
    <section class="color_choose">
        <div class="color_page wrapper clearfix">
            <div class="color_l_sidebar">
                <h1>Подбор по цвету</h1>
                <div class="color_menu">
                    <ul>
                        <li>
                            <a class="__elementSelect" href="javascript:void(0);" data-el="roof">
                                    ЦВЕТ КРЫШИ
                                </a>
                        </li>
                        <li>
                            <a class="__elementSelect" href="javascript:void(0);" data-el="rainway">
                                    ЦВЕТ ФОДОСТОКА
                                </a>
                        </li>
                        <li>
                            <a class="__elementSelect" href="javascript:void(0);" data-el="facade">
                                    ЦВЕТ ФАСАДА
                                </a>
                        </li>
                        <li>
                            <a class="__elementSelect" href="javascript:void(0);" data-el="window">
                                    ЦВЕТ ОКОН
                                </a>
                        </li>
                    </ul>
                </div>
                <div class="select_color" id="__colorBlock_roof" style="display: block;">
                    <a href="javascript:void(0)"><span style="background-color: #ffffff
;" data-col="ffffff
" class="select_color_white"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #274537
;" data-col="274537
" class=""></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #838584
;" data-col="838584
" class=""></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #ac5627
;" data-col="ac5627
" class=""></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #431d12
;" data-col="431d12
" class=""></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #5d2028
;" data-col="5d2028
" class=""></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #820b03
;" data-col="820b03
" class=""></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #402e20
;" data-col="402e20
" class=""></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #2b4d1a
;" data-col="2b4d1a
" class=""></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #0f2518
;" data-col="0f2518
" class=""></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #2f3a2a
;" data-col="2f3a2a
" class=""></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #535b50
;" data-col="535b50
" class=""></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #ff9933;" data-col="ff9933" class="active"></span></a>
                </div>
                <div class="select_color" id="__colorBlock_rainway" style="display: none;">
                    <a href="javascript:void(0)"><span style="background-color: #ffffff
;" data-col="ffffff
" class="select_color_white"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #274537
;" data-col="274537
" class=""></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #838584
;" data-col="838584
" class=""></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #ac5627
;" data-col="ac5627
" class=""></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #431d12
;" data-col="431d12
"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #5d2028;" data-col="5d2028" class="active"></span></a>
                </div>
                <div class="select_color" id="__colorBlock_facade" style="display: none;">
                    <a href="javascript:void(0)"><span style="background-color: #ffffff
;" data-col="ffffff
" class="select_color_white"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #003333
;" data-col="003333
" class=""></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #003366
;" data-col="003366
"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #009999
;" data-col="009999
"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #336600
;" data-col="336600
"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #990000
;" data-col="990000
" class=""></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #Fc3300
;" data-col="Fc3300
" class="active"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #ccff99
;" data-col="ccff99
"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #ff9933
;" data-col="ff9933
"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #333333
;" data-col="333333
"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #663366;" data-col="663366"></span></a>
                </div>
                <div class="select_color" id="__colorBlock_window" style="display: none;">
                    <a href="javascript:void(0)"><span style="background-color: #ffffff
;" data-col="ffffff
" class="select_color_white"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #7f4f21
;" data-col="7f4f21
" class=""></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #62390b
;" data-col="62390b
" class=""></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #611b0f
;" data-col="611b0f
" class="active"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #000033
;" data-col="000033
"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #336600
;" data-col="336600
"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #990000
;" data-col="990000
"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #Fc3300
;" data-col="Fc3300
" class=""></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #ccff99
;" data-col="ccff99
"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #ff9933
;" data-col="ff9933
"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #003333
;" data-col="003333
"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #003366
;" data-col="003366
"></span></a>
                    <a href="javascript:void(0)"><span style="background-color: #009999;" data-col="009999"></span></a>
                </div>
            </div>
            <div class="home_pic">
                <div id="home_pic">
                    <div id="__house-1" class="__viewBlock">
                        <img id="house1" src="" alt="">
                        <embed id="roof1" data-t="roof" class="svgObj" src="" />
                        <embed id="window1" data-t="window" class="svgObj" src="" />
                        <embed id="facade1" data-t="facade" class="svgObj" src="" />
                        <embed id="rainway1" data-t="rainway" class="svgObj" src="" />
                        <img id="shadow1" src="" alt="" style="position: absolute; top: 0; left:0">
                    </div>
                    <div id="__house-2" class="__viewBlock">
                        <img id="house2" src="" alt="">
                        <embed id="roof2" data-t="roof" class="svgObj" src="" />
                        <embed id="window2" data-t="window" class="svgObj" src="" />
                        <embed id="facade2" data-t="facade" class="svgObj" src="" />
                        <embed id="rainway2" data-t="rainway" class="svgObj" src="" />
                        <img id="shadow2" src="" alt="" style="position: absolute; top: 0; left:0">
                    </div>
                </div>
                <div class="view_ctrl" id="view_ctrl">
                    <a href="javascript:void(0);" class="view active __viewSwitch" data-view="1">
                        ВИД 1
                    </a>
                    <a href="javascript:void(0);" class="view __viewSwitch" data-view="2">
                        ВИД 2
                    </a>
                </div>
                <div class="float_l">
                    <a href="javascript:void(0);" class="print" onclick="window.print();"><span>Распечатать</span></a>
                </div>
            </div>
        </div>
    </section>
    <footer class="main_footer row">
        <div class="column small-12 medium-2">
            <div class="row">
                <div class="logo column small-6 medium-12">
                    <a href="#"><img src="content/logo_gray.png" alt="Logo" /></a>
                </div>
                <div class="social_networks column small-6 medium-12">
                    <ul>
                        <li>
                            <a href="#" class="icon-youtube"></a>
                            <li>
                                <a href="#" class="icon-twitter"></a>
                                <li>
                                    <a href="#" class="icon-facebook"></a>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer_nav column small-12 medium-6">
            <ul class="small-block-grid-2 medium-block-grid-3">
                <li>
                    <strong class="b_title"><a href="#">Продукция</a></strong>
                    <ul>
                        <li><a href="#">Водостоки Rainway</a></li>
                        <li><a href="#">Прайс-лист</a></li>
                        <li><a href="#">Каталог</a></li>
                        <li><a href="#">Преимущества Rainway</a></li>
                        <li><a href="#">Фотогаллерея</a></li>
                        <li><a href="#">Прайс-лист</a></li>
                    </ul>
                    <strong class="b_title"><a href="#">Подобрать водосток</a></strong>
                    <ul>
                        <li><a href="#">Рассчитать водосток</a></li>
                        <li><a href="#">Выбрать цвет</a></li>
                    </ul>
                </li>
                <li>
                    <strong class="b_title"><a href="#">Подобрать водосток</a></strong>
                    <ul>
                        <li><a href="#">Рассчитать водосток</a></li>
                        <li><a href="#">Выбрать цвет</a></li>
                    </ul>
                    <strong class="b_title"><a href="#">Монтаж</a></strong>
                    <ul>
                        <li><a href="#">Новости</a></li>
                        <li><a href="#">Частые вопросы</a></li>
                    </ul>
                    <strong class="b_title"><a href="#">Полезное</a></strong>
                    <strong class="b_title"><a href="#">Где купить</a></strong>
                    <strong class="b_title"><a href="#">Контактная гтформация</a></strong>
                </li>
                <li>
                    <strong class="b_title"><a href="#">Быстрые ссылки</a></strong>
                    <ul>
                        <li><a href="#">Ошибки монтажа</a></li>
                        <li><a href="#">Потенциальным партнерам</a></li>
                        <li><a href="#">Сертификаты</a></li>
                        <li><a href="#">Видео-уроки</a></li>
                        <li><a href="#">Инструкцию по монтажу PDF</a></li>
                        <li><a href="#">Производство Rainway</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <div class="column small-12 medium-4">
            <form action="" method="Post" name="search_form" class="footer_search_form">
                <input type="text" name="search_field" />
                <button type="submit" name="submit_button" class="icon-search"></button>
            </form>
            <div class="copyright right_aligned">
                <small>Разработано в <a href="#"><img src="content/logo_footer.png" /></a></small>
                <small>&copy; 2014. Rainway. All rights reserved.</small>
            </div>
        </div>
    </footer>
    <div class="page_overlay"></div>
    <script src="js/jquery-1.11.0.min.js"></script>
    <script src="js/jquery.print.js"></script>
    <script src="js/all.js"></script>
</body>

</html>
<style>
</style>
<script>
var objPool = {},
    idBlock = 0;

function changeColor(svgEl, color) {
    var group = svgEl.getElementById("Layer_1");
    var elements = group.getElementsByTagName("polygon");
    for (var i = 0; i < elements.length; i++) {
        elements[i].style.setProperty("fill", color, "");
    }

    var elements = group.getElementsByTagName("path");
    for (var i = 0; i < elements.length; i++) {
        elements[i].style.setProperty("fill", color, "");
    }
};

function onLoadSvg() {
    var jEl = $(this);
    objPool[idBlock][jEl.data('t')] = this.getSVGDocument();
    changeColor(objPool[idBlock][jEl.data('t')], '#' + $('#__colorBlock_' + jEl.data('t') + ' span.active').data('col'));
}

var curRes = -1;

function repositionItems(ignoreView) {
    var wW = $(window).width();
    var tmpRes = 0;
    for (var viewType in objMap[idBlock]) {
        if (wW > viewType) {
            tmpRes = Math.max(tmpRes, viewType);
        }
    }

    if (!!ignoreView && tmpRes == curRes) return;
    curRes = tmpRes;
    $('#__house-' + idBlock).stop().fadeOut('fast', function() {
        for (var el in objMap[idBlock][curRes]) {
            $('#' + el).prop('src', objMap[idBlock][curRes][el]['s']);
            if (typeof objMap[idBlock][curRes][el]['t'] != 'undefined')
                $('#' + el).css('top', objMap[idBlock][curRes][el]['t']);
            if (typeof objMap[idBlock][curRes][el]['l'] != 'undefined')
                $('#' + el).css('left', objMap[idBlock][curRes][el]['l']);
        }
        $('#__house-' + idBlock).fadeIn('fast');
    });
}

var objMap = {
    1: {
        0: {
            'roof1': {
                's': 'tpl/img/color_roof1_sm.svg',
                't': 48,
                'l': 24
            },
            'rainway1': {
                's': 'tpl/img/color_rainway1_sm.svg',
                't': 174,
                'l': 20
            },
            'window1': {
                's': 'tpl/img/color_window1_sm.svg',
                't': 252,
                'l': 126
            },
            'facade1': {
                's': 'tpl/img/color_facade1_sm.svg',
                't': 211,
                'l': 60
            },
            'house1': {
                's': 'tpl/img/color_house1_sm.jpg'
            },
            'shadow1': {
                's': 'tpl/img/color_shadow1_sm.png',
                't': 46,
                'l': 21
            }
        },
        940: {
            'roof1': {
                's': 'tpl/img/color_roof1.svg',
                't': 67,
                'l': 31
            },
            'rainway1': {
                's': 'tpl/img/color_rainway1.svg',
                't': 233,
                'l': 29
            },
            'window1': {
                's': 'tpl/img/color_window1.svg',
                't': 331,
                'l': 165
            },
            'facade1': {
                's': 'tpl/img/color_facade1.svg',
                't': 279,
                'l': 82
            },
            'house1': {
                's': 'tpl/img/color_house1.jpg'
            },
            'shadow1': {
                's': 'tpl/img/color_shadow1.png',
                't': 66,
                'l': 28
            }
        }
    },
    2: {
        0: {
            'roof2': {
                's': 'tpl/img/color_roof2_sm.svg',
                't': 60,
                'l': 74
            },
            'rainway2': {
                's': 'tpl/img/color_rainway2_sm.svg',
                't': 189,
                'l': 264
            },
            'window2': {
                's': 'tpl/img/color_window2_sm.svg',
                't': 253,
                'l': 136
            },
            'facade2': {
                's': 'tpl/img/color_facade2_sm.svg',
                't': 219,
                'l': 99
            },
            'house2': {
                's': 'tpl/img/color_house2_sm.jpg'
            },
            'shadow2': {
                's': 'tpl/img/color_shadow2_sm.png',
                't': 60,
                'l': 72
            }
        },
        940: {
            'roof2': {
                's': 'tpl/img/color_roof2.svg',
                't': 74,
                'l': 85
            },
            'rainway2': {
                's': 'tpl/img/color_rainway2.svg',
                't': 230,
                'l': 316
            },
            'window2': {
                's': 'tpl/img/color_window2.svg',
                't': 306,
                'l': 161
            },
            'facade2': {
                's': 'tpl/img/color_facade2.svg',
                't': 265,
                'l': 116
            },
            'house2': {
                's': 'tpl/img/color_house2.png'
            },
            'shadow2': {
                's': 'tpl/img/color_shadow2.png',
                't': 65,
                'l': 85
            }
        }
    }
};

$(function() {
    $('.select_color a:first-child span').addClass('select_color_white active');

    $('.__viewSwitch').click(function() {
        if (idBlock == $(this).data('view')) return false;

        idBlock = $(this).data('view');
        repositionItems(false);
        var svgList = $('#__house-' + idBlock + ' embed');

        $('.__viewBlock').hide();
        $('#__house-' + idBlock).show();

        if (typeof objPool[idBlock] != 'object') {
            objPool[idBlock] = {};
            var svgCnt = svgList.length;
            $.each(svgList, function(ind, el) {
                document.getElementById($(this).prop('id')).addEventListener('load', onLoadSvg, true);
            });
        }
    });

    $('.select_color span').click(function(evt) {
        if ($(this).hasClass('active')) return;
        $(this).parents('.select_color').find('.active').removeClass('active');
        $(this).addClass('active');

        var curEl = $('.__elementSelect.__curEl');
        if (curEl.length == 0) return;
        var houseEl = curEl.data('el');
        var color = $(this).data('col');
        changeColor(objPool[idBlock][houseEl], '#' + color);
    });

    $('.__elementSelect').click(function() {
        if ($(this).hasClass('active')) return;

        $('.__elementSelect.active').removeClass('__curEl active');
        $(this).addClass('active __curEl');
        $('.select_color').hide();
        $('#__colorBlock_' + $(this).data('el')).show();
    });

    $('.__viewSwitch').first().click();
    $('.__elementSelect').first().click();

    var resizeTimeOut = null;

    window.onresize = function() {
        if (resizeTimeOut != null)
            clearTimeout(resizeTimeOut);

        resizeTimeOut = setTimeout(function() {
            repositionItems(true);
        }, 200);
    };
});
</script>
